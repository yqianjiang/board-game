{"version":3,"file":"js/373.4eb47a7f.js","mappings":"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","sources":["webpack://board-games/./src/utils/useBoardGame.ts","webpack://board-games/./src/components/LifeGame.vue?f2fd","webpack://board-games/./src/utils/utils.ts","webpack://board-games/./src/components/LifeGame.vue?235e","webpack://board-games/./src/components/LifeGame.vue"],"sourcesContent":["export const initBoard = (nRows: number, nCols: number): number[][] => {\n  const res: number[][] = [];\n  for (let i = 0; i < nRows; i++) {\n    res[i] = [];\n    for (let j = 0; j < nCols; j++) {\n      res[i].push(0);\n    }\n  }\n  return res;\n};\n\n// 共同： stateMatrix 和 reset()\n// prevState 和 撤销（返回上一步）","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2927b446\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"game-wrap\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"生命游戏\", -1))\nconst _hoisted_3 = [\"name\", \"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.stateMatrix, (rowState, i) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        class: \"row\",\n        key: rowState\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(rowState, (state, j) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: _normalizeClass([\"toggle-box\", { 'toggle-box--dead': state === 0 }]),\n            key: state,\n            name: `${i},${j}`,\n            onClick: ($event: any) => (_ctx.toggle(i, j))\n          }, null, 10, _hoisted_3))\n        }), 128))\n      ]))\n    }), 128)),\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.start && _ctx.start(...args)))\n    }, \"开始\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.stop = true))\n    }, \"停止\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.goNext && _ctx.goNext(...args)))\n    }, \"下一步\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.reset && _ctx.reset(...args)))\n    }, \"重置\")\n  ]))\n}","export const getMatrixSum = (matrix: number[][]): number => {\n  let sum = 0;\n  for (let i = 0; i < matrix.length; i++) {\n    for (let j = 0; j < matrix[0].length; j++) {\n      sum += matrix[i][j] ?? 0;\n    }\n  }\n  return sum;\n};\n\nexport const sleep = async (t = 300) => {\n  await new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(0);\n    }, t);\n  });\n};\n\nexport const deepEqual = (arr1: any, arr2: any): boolean => {\n  return JSON.stringify(arr1) === JSON.stringify(arr2);\n};","\nimport { computed, defineComponent, ref, watchEffect } from \"vue\";\nimport { initBoard } from \"@/utils/useBoardGame\";\nimport { getMatrixSum, sleep, deepEqual } from \"@/utils/utils\";\n\nconst gameOfLife = function (board: number[][]) {\n  const sum = function (board: number[][], mid_i: number, mid_j: number) {\n    let res = 0;\n    for (let i = Math.max(0, mid_i - 1); i <= mid_i + 1; i++) {\n      for (let j = Math.max(0, mid_j - 1); j <= mid_j + 1; j++) {\n        res += board[i]?.[j] ?? 0;\n      }\n    }\n    return res;\n  };\n  const res: number[][] = [];\n  const nRows = board.length; // m >= 1\n  const nCols = board[0].length; // n <= 25\n\n  for (let i = 0; i < nRows; i++) {\n    res[i] = [];\n    for (let j = 0; j < nCols; j++) {\n      if (board[i][j] === 0) {\n        res[i].push(sum(board, i, j) === 3 ? 1 : 0);\n      } else {\n        const curSum = sum(board, i, j) - 1;\n        res[i].push(curSum === 3 || curSum === 2 ? 1 : 0);\n      }\n    }\n  }\n\n  return res;\n};\n\nexport default defineComponent({\n  props: {\n    properties: Object,\n  },\n  setup(props) {\n    const boardSize = computed(() => {\n      return [\n        props.properties?.nRows.default || 9,\n        props.properties?.nCols.default || 9,\n      ];\n    });\n    const stateMatrix = ref([[0]]);\n    const prevState = ref([[0]]);\n    const stop = ref(false);\n    const goNext = () => {\n      prevState.value = stateMatrix.value;\n      stateMatrix.value = gameOfLife(stateMatrix.value);\n    };\n    const start = async () => {\n      stop.value = false;\n\n      while (\n        getMatrixSum(stateMatrix.value) > 0 &&\n        !deepEqual(prevState.value, stateMatrix.value) &&\n        !stop.value\n      ) {\n        console.log(1);\n        goNext();\n        await sleep(props.properties?.speed.default);\n      }\n    };\n    const toggle = (i: number, j: number) => {\n      stateMatrix.value[i][j] = +!stateMatrix.value[i][j];\n    };\n    const reset = () => {\n      stop.value = true;\n      const [N_ROWS, N_COLS] = boardSize.value;\n      stateMatrix.value = initBoard(N_ROWS, N_COLS);\n    };\n    watchEffect(reset);\n\n    return { stateMatrix, goNext, start, toggle, reset, stop };\n  },\n});\n","import { render } from \"./LifeGame.vue?vue&type=template&id=2927b446&scoped=true&ts=true\"\nimport script from \"./LifeGame.vue?vue&type=script&lang=ts\"\nexport * from \"./LifeGame.vue?vue&type=script&lang=ts\"\n\nimport \"./LifeGame.vue?vue&type=style&index=0&id=2927b446&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/lingoace/Documents/Github/_demos/games/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2927b446\"]])\n\nexport default __exports__"],"names":["initBoard","nRows","nCols","res","i","j","push","_withScopeId","n","_hoisted_1","class","_hoisted_2","_","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","stateMatrix","rowState","key","state","name","onClick","$event","toggle","args","start","stop","goNext","reset","getMatrixSum","matrix","sum","length","sleep","async","t","Promise","resolve","setTimeout","deepEqual","arr1","arr2","JSON","stringify","gameOfLife","board","mid_i","mid_j","Math","max","curSum","props","properties","Object","setup","boardSize","default","prevState","value","console","log","speed","N_ROWS","N_COLS","__exports__"],"sourceRoot":""}