{"version":3,"file":"js/373.23530dbe.js","mappings":"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","sources":["webpack://board-games/./src/utils/useBoardGame.ts","webpack://board-games/./src/components/LifeGame.vue?f2fd","webpack://board-games/./src/utils/utils.ts","webpack://board-games/./src/components/LifeGame.vue?235e","webpack://board-games/./src/components/LifeGame.vue"],"sourcesContent":["export const initBoard = (nRows: number, nCols: number, initNum: number | number[] = 0): number[][] => {\n  const res: number[][] = [];\n  for (let i = 0; i < nRows; i++) {\n    res[i] = [];\n    for (let j = 0; j < nCols; j++) {\n      const num = typeof initNum === 'number' ? initNum : getInitNum(initNum);\n      res[i].push(num);\n    }\n  }\n  return res;\n};\n\nconst getInitNum = (nums: number[]): number => {\n  const n = nums.length;\n  if ( n === 1) {\n    return nums[0];\n  } else {\n    const idx = Math.floor(Math.random() * n);\n    return nums[idx];\n  }\n}\n\n// 共同： stateMatrix 和 reset()\n// prevState 和 撤销（返回上一步）\n","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2927b446\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"game-wrap\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"生命游戏\", -1))\nconst _hoisted_3 = [\"name\", \"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.stateMatrix, (rowState, i) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        class: \"row\",\n        key: rowState\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(rowState, (state, j) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: _normalizeClass([\"toggle-box\", { 'toggle-box--dead': state === 0 }]),\n            key: state,\n            name: `${i},${j}`,\n            onClick: ($event: any) => (_ctx.toggle(i, j))\n          }, null, 10, _hoisted_3))\n        }), 128))\n      ]))\n    }), 128)),\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.start && _ctx.start(...args)))\n    }, \"开始\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.stop = true))\n    }, \"停止\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.goNext && _ctx.goNext(...args)))\n    }, \"下一步\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.reset && _ctx.reset(...args)))\n    }, \"重置\")\n  ]))\n}","export const getMatrixSum = (matrix: number[][]): number => {\n  let sum = 0;\n  for (let i = 0; i < matrix.length; i++) {\n    for (let j = 0; j < matrix[0].length; j++) {\n      sum += matrix[i][j] ?? 0;\n    }\n  }\n  return sum;\n};\n\nexport const sleep = async (t = 300) => {\n  await new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(0);\n    }, t);\n  });\n};\n\nexport const deepEqual = (arr1: any, arr2: any): boolean => {\n  return JSON.stringify(arr1) === JSON.stringify(arr2);\n};","\nimport { computed, defineComponent, ref, watchEffect } from \"vue\";\nimport { initBoard } from \"@/utils/useBoardGame\";\nimport { getMatrixSum, sleep, deepEqual } from \"@/utils/utils\";\n\nconst gameOfLife = function (board: number[][]) {\n  const sum = function (board: number[][], mid_i: number, mid_j: number) {\n    let res = 0;\n    for (let i = Math.max(0, mid_i - 1); i <= mid_i + 1; i++) {\n      for (let j = Math.max(0, mid_j - 1); j <= mid_j + 1; j++) {\n        res += board[i]?.[j] ?? 0;\n      }\n    }\n    return res;\n  };\n  const res: number[][] = [];\n  const nRows = board.length; // m >= 1\n  const nCols = board[0].length; // n <= 25\n\n  for (let i = 0; i < nRows; i++) {\n    res[i] = [];\n    for (let j = 0; j < nCols; j++) {\n      if (board[i][j] === 0) {\n        res[i].push(sum(board, i, j) === 3 ? 1 : 0);\n      } else {\n        const curSum = sum(board, i, j) - 1;\n        res[i].push(curSum === 3 || curSum === 2 ? 1 : 0);\n      }\n    }\n  }\n\n  return res;\n};\n\nexport default defineComponent({\n  props: {\n    properties: Object,\n  },\n  setup(props) {\n    const boardSize = computed(() => {\n      return [\n        props.properties?.nRows.default || 9,\n        props.properties?.nCols.default || 9,\n      ];\n    });\n    const stateMatrix = ref([[0]]);\n    const prevState = ref([[0]]);\n    const stop = ref(false);\n    const goNext = () => {\n      prevState.value = stateMatrix.value;\n      stateMatrix.value = gameOfLife(stateMatrix.value);\n    };\n    const start = async () => {\n      stop.value = false;\n\n      while (\n        getMatrixSum(stateMatrix.value) > 0 &&\n        !deepEqual(prevState.value, stateMatrix.value) &&\n        !stop.value\n      ) {\n        console.log(1);\n        goNext();\n        await sleep(props.properties?.speed.default);\n      }\n    };\n    const toggle = (i: number, j: number) => {\n      stateMatrix.value[i][j] = +!stateMatrix.value[i][j];\n    };\n    const reset = () => {\n      stop.value = true;\n      const [N_ROWS, N_COLS] = boardSize.value;\n      stateMatrix.value = initBoard(N_ROWS, N_COLS);\n    };\n    watchEffect(reset);\n\n    return { stateMatrix, goNext, start, toggle, reset, stop };\n  },\n});\n","import { render } from \"./LifeGame.vue?vue&type=template&id=2927b446&scoped=true&ts=true\"\nimport script from \"./LifeGame.vue?vue&type=script&lang=ts\"\nexport * from \"./LifeGame.vue?vue&type=script&lang=ts\"\n\nimport \"./LifeGame.vue?vue&type=style&index=0&id=2927b446&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/mac/Documents/github/board-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2927b446\"]])\n\nexport default __exports__"],"names":["initBoard","nRows","nCols","initNum","res","i","j","num","getInitNum","push","nums","n","length","idx","Math","floor","random","_withScopeId","_hoisted_1","class","_hoisted_2","_","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","stateMatrix","rowState","key","state","name","onClick","$event","toggle","args","start","stop","goNext","reset","getMatrixSum","matrix","sum","sleep","async","t","Promise","resolve","setTimeout","deepEqual","arr1","arr2","JSON","stringify","gameOfLife","board","mid_i","mid_j","max","curSum","props","properties","Object","setup","boardSize","default","prevState","value","console","log","speed","N_ROWS","N_COLS","__exports__"],"sourceRoot":""}