{"version":3,"file":"js/448.8a332263.js","mappings":"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","sources":["webpack://board-games/./src/utils/useBoardGame.ts","webpack://board-games/./src/components/Sudoku.vue?ea59","webpack://board-games/./src/utils/solveSudoku.ts","webpack://board-games/./src/components/Sudoku.vue?4bf4","webpack://board-games/./src/components/Sudoku.vue"],"sourcesContent":["export const initBoard = (nRows: number, nCols: number, initNum: number | number[] = 0): number[][] => {\n  const res: number[][] = [];\n  for (let i = 0; i < nRows; i++) {\n    res[i] = [];\n    for (let j = 0; j < nCols; j++) {\n      const num = typeof initNum === 'number' ? initNum : getInitNum(initNum);\n      res[i].push(num);\n    }\n  }\n  return res;\n};\n\nconst getInitNum = (nums: number[]): number => {\n  const n = nums.length;\n  if ( n === 1) {\n    return nums[0];\n  } else {\n    const idx = Math.floor(Math.random() * n);\n    return nums[idx];\n  }\n}\n\n// 共同： stateMatrix 和 reset()\n// prevState 和 撤销（返回上一步）\n","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-893a6fe0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"game-wrap\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"数独\", -1))\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"disabled\"]\nconst _hoisted_4 = { key: 0 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.stateMatrix, (rowState, i) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        class: \"row\",\n        key: rowState\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(rowState, (state, j) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n            class: _normalizeClass([\"toggle-box\", {\n          'toggle-box--error': _ctx.errorMatrix[i][j],\n        }]),\n            key: state,\n            \"onUpdate:modelValue\": ($event: any) => ((rowState[j]) = $event),\n            disabled: !!_ctx.originState[i][j]\n          }, null, 10, _hoisted_3)), [\n            [_vModelText, rowState[j]]\n          ])\n        }), 128))\n      ]))\n    }), 128)),\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.reset && _ctx.reset(...args)))\n    }, \"清空\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.init(1.3)))\n    }, \"重开\"),\n    _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.solve && _ctx.solve(...args)))\n    }, \"解答\"),\n    (_ctx.loading)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"loading...\"))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","const getNeighborVal = (matrix: number[][], i: number, j: number): number[] => {\n  const getNeighborIdx = (i: number, j: number): number[][] => {\n    const getBox = (x: number) => Math.floor(x / 3);\n    const di = getBox(i) * 3;\n    const dj = getBox(j) * 3;\n    return [\n      [0, 0],\n      [0, 1],\n      [0, 2],\n      [1, 0],\n      [1, 1],\n      [1, 2],\n      [2, 0],\n      [2, 1],\n      [2, 2],\n    ].map((y) => [y[0] + di, y[1] + dj]);\n  };\n  const res: number[] = [];\n  const neighbors = getNeighborIdx(i, j);\n  for (const item of neighbors) {\n    let [x, y] = item;\n    res.push(matrix[x][y]);\n  }\n  return res;\n};\n\n// 检查item在arr中是否已经存在\nconst checkScope = (arr: number[], item: number) => {\n  return arr.includes(item);\n};\n\n// 检测matrix[i][j]是否合法\nconst checkNumber = (\n  matrix: number[][],\n  i: number,\n  j: number,\n  candidate: number\n): boolean => {\n  const item = candidate;\n\n  // 检查同一行、同一列、九宫格是否已经存在item\n  if (\n    checkScope(matrix[i], item) ||\n    checkScope(\n      matrix.map((x) => x[j]),\n      item\n    ) ||\n    checkScope(getNeighborVal(matrix, i, j), item)\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\n// 原地遍历，试试在每个格子填入数字，一旦不可行了就返回false撤回上一步操作\nconst trySolve = (matrix: number[][]): boolean => {\n  for (const i in matrix) {\n    for (let j = 0; j < matrix[i].length; j++) {\n      // 不需要填入，直接下一格\n      if (matrix[i][j] !== 0) {\n        continue;\n      }\n\n      // 需要填入数字\n      // console.log(\"正在填入...\", i, j);\n\n      // 1-9，每个数字尝试一次\n      for (let k = 1; k < 10; k++) {\n        // 检查填入k是否可行，若可行，复制一份，在复制的基础上继续推演trySolve下一格\n        if (checkNumber(matrix, +i, j, k)) {\n          // 把第k个位置变为1 --> 填入数字k\n          matrix[i][j] = k;\n          if (trySolve(matrix)) {\n            return true;\n          }\n\n          // 回溯\n          matrix[i][j] = 0;\n        }\n      }\n      // 如果试完还没填数字，return false？\n      if (matrix[i][j]===0) {\n        return false;\n      }\n    }\n  }\n  return true; // 填好啦\n};\n\nexport const solveSudoku = (initMatrix: (number|string)[][]): undefined | number[][] => {\n  const matrix = initMatrix.map((row) => {\n    return row.map((item) => +item || 0);\n  });\n\n  const res = trySolve(matrix);\n\n  if (res) {\n    return matrix;\n  }\n};\n","\nimport { computed, defineComponent, ref } from \"vue\";\nimport { initBoard } from \"@/utils/useBoardGame\";\nimport { solveSudoku } from \"@/utils/solveSudoku\";\n\ntype MatrixType = string | number;\n\nconst getNeighborVal = (matrix: MatrixType[][], i: number, j: number): number[] => {\n  const getNeighborIdx = (i: number, j: number): number[][] => {\n    const getBox = (x: number) => Math.floor(x / 3);\n    const di = getBox(i) * 3;\n    const dj = getBox(j) * 3;\n    return [\n      [0, 0],\n      [0, 1],\n      [0, 2],\n      [1, 0],\n      [1, 1],\n      [1, 2],\n      [2, 0],\n      [2, 1],\n      [2, 2],\n    ].map((y) => [y[0] + di, y[1] + dj]);\n  };\n  const res: number[] = [];\n  const neighbors = getNeighborIdx(i, j);\n  for (const item of neighbors) {\n    let [x, y] = item;\n    res.push(+matrix[x][y]);\n  }\n  return res;\n};\nconst checkNumber = (\n  matrix: MatrixType[][],\n  i: number,\n  j: number,\n): boolean => {\n  const item = matrix[i][j];\n  if (!item) return false;\n  if (item > 9 || item < 0) return true;\n  const checkScope = (arr: MatrixType[]) => {\n    if (arr.filter((x) => +x === +item).length > 1) {\n      return true;\n    }\n  };\n\n  // 检查同一行\n  if (\n    checkScope(matrix[i]) ||\n    checkScope(matrix.map((x) => x[j])) ||\n    checkScope(getNeighborVal(matrix, i, j))\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nexport default defineComponent({\n  props: {\n    properties: Object,\n  },\n  setup() {\n    const [N_ROWS, N_COLS] = [9, 9];\n    const loading = ref(false);\n    const stateMatrix = ref<MatrixType[][]>(initBoard(N_ROWS, N_COLS));\n    const originState = ref(stateMatrix.value);\n    const errorMatrix = computed(() => {\n      return stateMatrix.value.map((x, i) => {\n        return x.map((y, j) => {\n          const res = checkNumber(stateMatrix.value, i, j);\n          return res;\n        });\n      });\n    });\n    const reset = () => {\n      stateMatrix.value = originState.value.map(x=>x.map(y=>y));\n    };\n    const init = (level=1.3) => {\n      loading.value = true;\n      const start = new Date().getTime();\n      const initSudokuBoard = (options = [0, 10]) => {\n        const matrix = initBoard(N_ROWS, N_COLS, options);\n        for (const i in matrix) {\n          for (let j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j]===0) continue;\n\n            // 10的格子随机填一个数\n            matrix[i][j] = Math.ceil(Math.random() * 9);\n\n            // 不合法，撤回\n            if (checkNumber(matrix, +i, j)) {\n              matrix[i][j] = 0;\n            }\n          }\n        }\n\n        return matrix;\n      };\n\n      // 随机开局，不一定有解\n      let matrix = initSudokuBoard();\n      let res = solveSudoku(matrix);\n      let count = 1;\n      const options = [0, 10, 0]\n      while (!res && count < 5) {\n        matrix = initSudokuBoard(options);\n        res = solveSudoku(matrix);\n        count++;\n        options.push(0);\n      }\n      console.log(count);\n      if (res) {\n        stateMatrix.value = res.map(x=>x.map(y=>Math.floor(Math.random() * level)?y:\"\")); // 可以在res的基础上挖空\n      } else {\n        stateMatrix.value = matrix;\n      }\n      originState.value = stateMatrix.value.map(x=>x.map(y=>y));\n      loading.value = false;\n      console.log('用时', new Date().getTime() - start);\n    };\n    init();\n    const solve = () => {\n      const res = solveSudoku(originState.value);\n      if (res) {\n        stateMatrix.value = res;\n      } else {\n        console.log('此题无解')\n      }\n    };\n    return { stateMatrix, reset, init, errorMatrix, originState, solve, loading };\n  },\n});\n","import { render } from \"./Sudoku.vue?vue&type=template&id=893a6fe0&scoped=true&ts=true\"\nimport script from \"./Sudoku.vue?vue&type=script&lang=ts\"\nexport * from \"./Sudoku.vue?vue&type=script&lang=ts\"\n\nimport \"./Sudoku.vue?vue&type=style&index=0&id=893a6fe0&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/lingoace/Documents/Github/_demos/board-game/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-893a6fe0\"]])\n\nexport default __exports__"],"names":["initBoard","nRows","nCols","initNum","res","i","j","num","getInitNum","push","nums","n","length","idx","Math","floor","random","_withScopeId","_hoisted_1","class","_hoisted_2","_","_hoisted_3","_hoisted_4","key","render","_ctx","_cache","$props","$setup","$data","$options","stateMatrix","rowState","state","errorMatrix","$event","disabled","originState","onClick","args","reset","init","solve","loading","getNeighborVal","matrix","getNeighborIdx","getBox","x","di","dj","map","y","neighbors","item","checkScope","arr","includes","checkNumber","candidate","trySolve","k","solveSudoku","initMatrix","row","filter","props","properties","Object","setup","N_ROWS","N_COLS","value","level","start","Date","getTime","initSudokuBoard","options","ceil","count","console","log","__exports__"],"sourceRoot":""}